<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>网格平面</title>
    <style>

        * {
            padding:  0;
            margin: 0;
        }

        html,body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

    </style>
    <!-- <script src="https://cdn.bootcdn.net/ajax/libs/three.js/r122/three.js"></script> -->
    <script src="../common/three.js"></script>
    <!-- 一个官网的3D 网格平面的demo -->
</head>
<body>
    

    <script>
        /* 初始化一个场景 */
        const scene = new THREE.Scene()


        /* 初始化一个相机，我用的是一个透视相机 perspective，还有一个正交相机，暂时不用 orthographic */
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000) /* 角度，长宽比，近截面，远截面 */

        /* 初始化一个webgl的渲染器，设置渲染的区域，将渲染器的dom添加到body中 */
        const renderer = new THREE.WebGLRenderer({antialias: true})
        renderer.setSize(window.innerWidth, window.innerHeight)
        document.body.appendChild(renderer.domElement)

        // /* 创建几何 和 材料，将它们放入到一个网格中，生成一个立方体 */
        // const geometry = new THREE.BoxGeometry()
        // const material = new THREE.MeshBasicMaterial({color: 0x00ff00})
        // const cube = new THREE.Mesh(geometry, material)
        // /* 给当前场景添加一个立方体*/
        // scene.add(cube)

        /* 创建一个平面 */
        const planeBufferGeometry = new THREE.PlaneBufferGeometry(100, 100)
        const plane = new THREE.Mesh(planeBufferGeometry, new THREE.MeshBasicMaterial({color: 0xffffff, side: THREE.DoubleSide}))
        plane.name = 'plane'

        /* 给当前场景添加一个立方体 */
        scene.add(plane)

        /* 给当前场景添加一个网格*/
        const gridHelper = new THREE.GridHelper(100, 100)
        scene.add( gridHelper )

        /* 给相机的 z轴设置距离为 100，这样立方体就不会贴的立方体那么近 */
        // camera.position.z = 100
        camera.position.set(0, 0, 100)
        plane.rotation.x = -Math.PI / 3

        renderer.render(scene, camera)
        
        /* 创建一个动画， 没一帧都让立方体旋转，x轴和y轴都 +0.1，更新场景和相机 */
        const animate = function () {
            requestAnimationFrame( animate )

            // plane.rotation.x += 0.01
            // plane.rotation.y += 0.01
            // console.log(plane.rotation.x, plane.rotation.y)

            const planeEntity = scene.getObjectByName('plane')
            planeEntity.rotation.x += 0.01
            planeEntity.rotation.y += 0.01
            renderer.render(scene, camera)
        }

        animate()


        /**
         * other
         */
         window.addEventListener('resize', () => {
            this.onWindowResize()
        })

        function onWindowResize () {
            renderer.setSize(window.innerWidth, window.innerHeight)
        }


    </script>
</body>
</html>